<header class="date-header timetable-header">
  <h1><%= date_range_text %></h1>
  <div class="btn-group pull-right">
    <!-- Want to put these into a helper but gave up -->
    <%= link_to "current week", root_path(date: Date.today), class: "btn #{'disabled' if @date == Date.today}" %>
    <%= link_to "<", root_path(date: @date.prev_week()), class: 'btn' %>
    <%= link_to ">", root_path(date: @date.next_week()), class: 'btn' %>
  </div>
</header>

<div class="container timetable-container">
  <div class="headers">
    <% week_range.each do |day| %>
      <div class="title">
        <h4><%= day.strftime("%e %A") %></h4>
      </div>
    <% end %>
  </div>

  <div class="timetable">
    <div class="times">
      <% (1..24).each do |hour| %>
        <div class="time"><%= hour_text(hour) %></div>
        <div class="time"><%= hour_text(hour + 0.5) %></div>
      <% end %>
    </div>

    <% week_range.each do |day| %>
      <div class="day">
        <% (1..24).each do |hour| %>
          <div class="half_hour <%= 'main-hour' if hour >= (8 + 0.5) && hour <= 17 %>" data-datetime="<%= hour_time(day, hour) %>" data-duration="1">
            <% entries(day, hour).each do |time_entry| %>
              <%= render time_entry %>
            <% end %>
          </div>
          <div class="half_hour <%= 'main-hour' if hour >= 8 && hour <= 16 %>" data-datetime="<%= hour_time(day, hour + 0.5) %>" data-duration="1">
            <% entries(day, hour + 0.5).each do |time_entry| %>
              <%= render time_entry %>
            <% end %>
          </div>
        <% end %>
      </div>
    <% end %>
  </div>
  <div class="bottom-border"></div>

</div>
